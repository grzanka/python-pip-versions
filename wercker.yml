# build python 2.7 by default
box: wercker/ubuntu

build:
  steps:

    # copy script to a location that gets passed along to next pipelines
    - script:
        name: copy binary
        code: cp *sh "$WERCKER_OUTPUT_DIR"


# ---------------------------------- debian 8 jessie -----------------------------------------------

test_debian_8_jessie_py2:
  box: debian:jessie

  steps:

    - script:
        name: prerequisites
        code: |
          sudo apt-get update
          sudo apt-get install -qq -y --no-install-recommends python-pip python-pkg-resources wget
          python -V
          pip -V


test_debian_8_jessie_py3:
  box: debian:jessie

  steps:
    - script:
        name: prerequisites
        code: |
          sudo apt-get update
          sudo apt-get install -qq -y --no-install-recommends python3-pip  wget
          python3 -V
          pip3 -V


# ---------------------------------- debian testing -----------------------------------------------

test_debian_testing_py3:
  box: debian:testing

  steps:
    - script:
        name: prerequisites
        code: |
          sudo apt-get update
          sudo apt-get install -qq -y --no-install-recommends python3-pip python3-pkg-resources wget
          python3 -V
          pip3 -V


test_debian_testing_py2:
  box: debian:testing

  steps:
    - script:
        name: prerequisites
        code: |
          sudo apt-get update
          sudo apt-get install -qq -y --no-install-recommends python-pip python-pkg-resources wget
          python -V
          pip -V


# ---------------------------------- Ubuntu 16.04 -----------------------------------------------

test_ubuntu_1604_py2:
  box: ubuntu:16.04

  steps:

    - script:
        name: prerequisites
        code: |
          sudo apt-get update
          sudo apt-get install -qq -y --no-install-recommends python-pip python-pkg-resources  wget
          python -V
          pip -V


test_ubuntu_1604_py3:
  box: ubuntu:16.04

  steps:
    - script:
        name: prerequisites
        code: |
          sudo apt-get update
          sudo apt-get install -qq -y --no-install-recommends python3-pip python3-pkg-resources wget
          python3 -V
          pip3 -V


# ---------------------------------- Ubuntu 14.04 -----------------------------------------------

test_ubuntu_1404_py2:
  box: ubuntu:14.04

  steps:

    - script:
        name: prerequisites
        code: |
          sudo apt-get update
          sudo apt-get install -qq -y --no-install-recommends python-pip python-pkg-resources wget
          python -V
          pip -V


test_ubuntu_1404_py3:
  box: ubuntu:14.04

  steps:
    - script:
        name: prerequisites
        code: |
          sudo apt-get update
          sudo apt-get install -qq -y --no-install-recommends python3-pip wget
          python3 -V
          pip3 -V

# ---------------------------------- Centos 7 -----------------------------------------------

test_centos_7_py2:
  box: centos:7

  steps:

    - script:
        name: prerequisites
        code: |
          sudo yum update -y -q
          sudo yum install -q -y python wget
          python -V
          wget https://bootstrap.pypa.io/get-pip.py
          python get-pip.py
          pip -V


test_centos_7_py3:
  box: centos:7

  steps:
    - script:
        name: prerequisites
        code: |
          sudo yum update -y -q
          sudo yum install -q -y python3 wget
          python -V
          wget https://bootstrap.pypa.io/get-pip.py
          python get-pip.py
          pip -V


# ---------------------------------- Centos 7 -----------------------------------------------

test_fedora_24_py2:
  box: fedora:24

  steps:

    - script:
        name: prerequisites
        code: |
          sudo dnf update -y -q
          sudo dnf install -q -y python-pip wget
          python -V
          pip -V


test_fedora_24_py3:
  box: fedora:24

  steps:
    - script:
        name: prerequisites
        code: |
          sudo dnf update -y -q
          sudo dnf install -q -y python3-pip wget
          python3 -V
          pip3 -V
